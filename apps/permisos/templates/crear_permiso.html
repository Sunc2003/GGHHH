{% extends 'base.html' %}
{% load static %}
 
{% block extra_css %}
<style>
  body {
    background-color: #f4f6f8;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  }
  #permiso-panel .container {
    max-width: 1100px;
  }
  .card {
    border-radius: 0;
    border: 1px solid #dcdcdc;
    background: #fff;
  }
  .card.shadow {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  }
  .card-title {
    font-weight: 700;
    font-size: 1.4rem;
    color: #222;
  }
  .form-label {
    font-weight: 600;
    font-size: 0.95rem;
    color: #333;
  }
  input.form-control,
  textarea.form-control,
  select.form-select {
    border-radius: 0;
    border: 1px solid #ccc;
    font-size: 0.95rem;
    padding: 0.55rem 0.75rem;
  }
  input.form-control:focus,
  textarea.form-control:focus,
  select.form-select:focus {
    border-color: #000;
    box-shadow: none;
  }
  .btn-dark {
    border-radius: 0;
    font-weight: 600;
    font-size: 0.95rem;
    padding: 0.6rem 1rem;
  }
  .table {
    border-radius: 0;
    margin-bottom: 0;
  }
  .table thead th {
    background-color: #212529;
    color: #fff;
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.85rem;
    border: none;
  }
  .table-bordered th,
  .table-bordered td {
    border: 1px solid #dcdcdc !important;
  }
  .table-hover tbody tr:hover {
    background-color: #f2f4f6;
  }
  .table td,
  .table th {
    vertical-align: middle;
    font-size: 0.9rem;
  }
  .table code {
    background: #f1f1f1;
    padding: 0.15rem 0.3rem;
    border-radius: 3px;
  }
</style>
{% endblock %}
 
{% block content %}
<div id="permiso-panel">
  <div class="container mt-5 mb-5">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10">
 
        <!-- FORMULARIO CREAR PERMISO -->
        <div class="card shadow mb-5">
          <div class="card-body">
            <h4 class="card-title mb-4 d-flex align-items-center">
              <i class="fa-solid fa-file-circle-plus me-2" style="font-size: 2rem; color: #222;"></i>
              Crear permiso
            </h4>
 
            <form method="post" novalidate>
              {% csrf_token %}
              <div class="mb-4">
                <label for="{{ form.codigo.id_for_label }}" class="form-label">C贸digo del Permiso</label>
                {{ form.codigo }}
                {% if form.codigo.errors %}
                  <div class="text-danger small">{{ form.codigo.errors.0 }}</div>
                {% endif %}
              </div>
              <div class="mb-4">
                <label for="{{ form.nombre.id_for_label }}" class="form-label">Nombre del Permiso</label>
                {{ form.nombre }}
                {% if form.nombre.errors %}
                  <div class="text-danger small">{{ form.nombre.errors.0 }}</div>
                {% endif %}
              </div>
              <div class="mb-4">
                <label for="{{ form.descripcion.id_for_label }}" class="form-label">Descripci贸n</label>
                {{ form.descripcion }}
                {% if form.descripcion.errors %}
                  <div class="text-danger small">{{ form.descripcion.errors.0 }}</div>
                {% endif %}
              </div>
              <div class="d-grid">
                <button type="submit" class="btn btn-dark">Guardar Permiso</button>
              </div>
            </form>
          </div>
        </div>
 
        <!-- LISTADO DE PERMISOS EXISTENTES -->
        <div class="card shadow">
          <div class="card-body">
            <h5 class="mb-3 d-flex align-items-center">
              <i class="fa-solid fa-list-check me-2"></i> Permisos existentes
            </h5>
 
            <div class="table-responsive">
              <table class="table table-bordered table-hover mb-0">
                <thead class="text-center">
                  <tr>
                    <th style="width: 6%">#</th>
                    <th style="min-width: 140px" class="text-start">C贸digo</th>
                    <th style="min-width: 220px" class="text-start">Nombre</th>
                    <th style="min-width: 260px" class="text-start">Descripci贸n</th>
                  </tr>
                </thead>
                <tbody>
                  {% for p in permisos %}
                    <tr>
                      <td class="text-center">{{ forloop.counter }}</td>
                      <td class="text-start"><code>{{ p.codigo }}</code></td>
                      <td class="text-start">{{ p.nombre }}</td>
                      <td class="text-start">{{ p.descripcion|default:"-" }}</td>
                    </tr>
                  {% empty %}
                    <tr>
                      <td colspan="4" class="text-center text-muted py-3">No hay permisos registrados.</td>
                    </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
 
          </div>
        </div>
 
      </div>
    </div>
  </div>
</div>
{% endblock %}